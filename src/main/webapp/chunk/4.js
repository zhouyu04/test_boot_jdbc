(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"320":function(e,t,n){"use strict";function parseUrl(e){var t,n,a=/\+/g,r=/([^&=]+)=?([^&]*)/g,o=e||window.location.href||"",i=function decode(e){return decodeURIComponent(e.replace(a," "))},c=o.indexOf("?"),u={};if(-1===c)return{};for(n=o.slice(c+1,o.length);t=r.exec(n);)u[i(t[1])]=i(t[2]);return u}function formatMoneyPoint(e,t){if(t=t||2,isNaN(e))return"0";if(0===e||0===Number(e))return"0.00";if(-1===(e=e.toString()).indexOf("."))return e+"."+"".padEnd(t,"0");var n=e.split(".");return n[1].length>t?e=function roundNum(e,t){return _.round(e,t)}(Number(e),t).toString():n[0]+"."+n[1].padEnd(t,"0")}function calcAdd(e,t){var n,a,r;try{n=e.toString().split(".")[1].length}catch(e){n=0}try{a=t.toString().split(".")[1].length}catch(e){a=0}return(calcMul(e,r=Math.pow(10,Math.max(n,a)))+calcMul(t,r))/r}function calcMul(e,t){t=void 0===t?0:t;var n=0,a=(e=void 0===e?0:e).toString(),r=t.toString();try{n+=a.split(".")[1].length}catch(e){}try{n+=r.split(".")[1].length}catch(e){}return Number(a.replace(".",""))*Number(r.replace(".",""))/Math.pow(10,n)}function formatMoney(e,t){var n=2;return t&&(n=t),function _formatMoney(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}(formatMoneyPoint(e,n))}n.d(t,"d",(function(){return parseUrl})),n.d(t,"c",(function(){return formatMoneyPoint})),n.d(t,"a",(function(){return calcAdd})),n.d(t,"b",(function(){return formatMoney}))},"328":function(e,t,n){},"334":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var a=n(27),r=n.n(a),o=n(37),i=n(2),c=n(4),u=n(30),s=n(11),d=n(12),l=n(5),b=n(0),m=n.n(b),f=n(319),p=n(321),h=n(320),g=(n(328),n(82)),w=function(e){Object(s.a)(Index,e);var t=Object(d.a)(Index);function Index(e){var n;return Object(i.a)(this,Index),n=t.call(this,e),Object(l.a)(Object(u.a)(n),"bindMember",Object(o.a)(r.a.mark((function _callee(){var e,t;return r.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(n.state.mobile&&!(n.state.mobile.length<11)){a.next=3;break}return Object(g.showToast)({"title":"请输入正确格式的手机号","icon":"none","duration":1e3}),a.abrupt("return");case 3:return e="/openapi/weChat/route/"+n.state.dbid,t={"body":{"mobile":n.state.mobile,"wx_card":n.state.wx_card,"openid":n.state.openid},"url":"https://tf-feature1.jdy.com/ierp/innernal-api/app/lsbd/mb_bind"},a.next=7,Object(g.request)({"url":e,"method":"POST","credentials":"include","header":{"content-type":"application/json"},"data":JSON.stringify(t),"success":function success(e){e.data.success?(n.setState({"success":!0}),Object(g.showToast)({"title":"会员绑定成功，请关闭当前页面"})):Object(g.showToast)({"title":e.data.message,"icon":"none","duration":1500})},"fail":function fail(e){console.log(e)}});case 7:case"end":return a.stop()}}),_callee)})))),Object(l.a)(Object(u.a)(n),"handleChange",(function(e){n.setState({"mobile":e})})),n.state={"mobile":"","wx_card":"","openid":"","dbid":"","success":!1},n}return Object(c.a)(Index,[{"key":"componentDidMount","value":function componentDidMount(){var e=Object.assign({"card_id":"","openid":"","fdbid":""},Object(h.d)());this.setState({"wx_card":e.card_id,"openid":e.openid,"dbid":e.fdbid})}},{"key":"onSubmit","value":function onSubmit(e){console.log(this.state.mobile)}},{"key":"render","value":function render(){return m.a.createElement(f.View,{"className":"bind-old-member"},m.a.createElement(p.AtForm,{"className":"member-form","onSubmit":this.bindMember},m.a.createElement(p.AtInput,{"name":"mobile","className":"mobile","type":"number","title":"手机号","placeholder":"请输入手机号码","maxlength":13,"value":this.state.mobile,"onChange":this.handleChange}),m.a.createElement(p.AtButton,{"formType":"submit","className":"check-btn","disabled":this.state.success},"确认")))}}]),Index}(b.Component)}}]);