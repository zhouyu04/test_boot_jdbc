(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"321":function(e,t,n){"use strict";function parseUrl(e){e=e||window.location.href||"";var t,n,a=/\+/g,r=/([^&=]+)=?([^&]*)/g,i=e?e.replace(/%/g,"%25"):"",c=function decode(e){return decodeURIComponent(e.replace(a," "))},o=i.indexOf("?"),d={};if(-1===o)return{};for(n=i.slice(o+1,i.length);t=r.exec(n);)d[c(t[1])]=c(t[2]);return d}function formatMoneyPoint(e,t){if(t=t||2,Number.isNaN(e))return"0";if(0===e||0===Number(e))return"0.00";if(-1===(e=e.toString()).indexOf("."))return e+"."+"".padEnd(t,"0");var n=e.split(".");return n[1].length>t?e=function roundNum(e,t){return _.round(e,t)}(Number(e),t).toString():n[0]+"."+n[1].padEnd(t,"0")}function calcAdd(e,t){var n,a,r;try{n=e.toString().split(".")[1].length}catch(e){n=0}try{a=t.toString().split(".")[1].length}catch(e){a=0}return(calcMul(e,r=Math.pow(10,Math.max(n,a)))+calcMul(t,r))/r}function calcMul(e,t){t=void 0===t?0:t;var n=0,a=(e=void 0===e?0:e).toString(),r=t.toString();try{n+=a.split(".")[1].length}catch(e){}try{n+=r.split(".")[1].length}catch(e){}return Number(a.replace(".",""))*Number(r.replace(".",""))/Math.pow(10,n)}function formatMoney(e,t){var n=2;return t&&(n=t),function _formatMoney(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}(formatMoneyPoint(e,n))}n.d(t,"d",(function(){return parseUrl})),n.d(t,"c",(function(){return formatMoneyPoint})),n.d(t,"a",(function(){return calcAdd})),n.d(t,"b",(function(){return formatMoney}))},"329":function(e,t,n){},"339":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var a=n(23),r=n.n(a),i=n(38),c=n(3),o=n(4),d=n(31),u=n(12),s=n(13),l=n(6),b=n(1),p=n.n(b),f=n(320),m=n(322),h=n(83),g=n(321),w=(n(329),function(e){Object(u.a)(Index,e);var t=Object(s.a)(Index);function Index(e){var n;return Object(c.a)(this,Index),n=t.call(this,e),Object(l.a)(Object(d.a)(n),"bindMember",Object(i.a)(r.a.mark((function _callee(){var e,t;return r.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(n.state.mobile&&!(n.state.mobile.length<11)){a.next=3;break}return Object(h.showToast)({"title":"请输入正确格式的手机号","icon":"none","duration":1e3}),a.abrupt("return");case 3:return e="/openapi/weChat/route/"+n.state.dbid,t={"body":{"mobile":n.state.mobile,"wx_card":n.state.wx_card,"openid":n.state.openid},"url":"https://tf.jdy.com/ierp/innernal-api/app/lsbd/mb_bind"},a.next=7,Object(h.request)({"url":e,"method":"POST","credentials":"include","header":{"content-type":"application/json"},"data":JSON.stringify(t),"success":function success(e){e.data.success?(n.setState({"success":!0}),Object(h.showToast)({"title":"会员绑定成功，请关闭当前页面"})):Object(h.showToast)({"title":e.data.message,"icon":"none","duration":1500})},"fail":function fail(e){console.log(e)}});case 7:case"end":return a.stop()}}),_callee)})))),Object(l.a)(Object(d.a)(n),"handleChange",(function(e){n.setState({"mobile":e})})),n.state={"mobile":"","wx_card":"","openid":"","dbid":"","success":!1},n}return Object(o.a)(Index,[{"key":"componentDidMount","value":function componentDidMount(){var e=Object.assign({"card_id":"","fdbid":"","openidCard":""},Object(g.d)());this.setState({"wx_card":e.card_id,"openid":e.openidCard,"dbid":e.fdbid})}},{"key":"render","value":function render(){return p.a.createElement(f.View,{"className":"bind-old-member"},p.a.createElement(f.View,{"className":"at-article__info title"},"绑定前，请确认您的会员卡已经激活过"),p.a.createElement(m.AtInput,{"name":"mobile","className":"mobile","type":"number","title":"手机号","placeholder":"请输入手机号码","maxlength":13,"value":this.state.mobile,"onChange":this.handleChange}),p.a.createElement(m.AtButton,{"type":"primary","className":"check-btn","disabled":this.state.success,"onClick":this.bindMember},"确认"))}}]),Index}(b.Component))}}]);